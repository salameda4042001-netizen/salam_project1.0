# app.py
import streamlit as st
from datetime import datetime

st.set_page_config(page_title="MBTI → 진로 추천 ()", page_icon="", layout="centered")

# 헤더
st.title(" MBTI 진로 리포트")
st.caption("당신의 MBTI를 골라주세요 — 간결하고 실용적인 진로 2가지를 추천해드립니다.")

st.write("---")

# 사이드바 정보 (간단한 메타)
with st.sidebar:
    st.write("**리포트 메타**")
    st.write(f"생성 시각: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    st.write("라이선스: 자유롭게 사용 가능 — 출처 표기 권장")
    st.write("")
    st.write("앱 사용법: MBTI 하나 선택 → '추천 받기' 버튼 클릭")

# MBTI 목록
mbti_list = [
    "ISTJ", "ISFJ", "INFJ", "INTJ",
    "ISTP", "ISFP", "INFP", "INTP",
    "ESTP", "ESFP", "ENFP", "ENTP",
    "ESTJ", "ESFJ", "ENFJ", "ENTJ"
]

# 진로 매핑: (선택1, 설명1), (선택2, 설명2)
career_map = {
    "ISTJ": (("품질관리 엔지니어", "세부 규정 준수와 체계적인 절차 설계에 강합니다."),
             ("공공 행정 담당자", "정확성과 책임감을 요구하는 공공 업무에 적합합니다.")),
    "ISFJ": (("의료 기록 관리자", "사람을 돌보는 책임감과 세심함이 빛납니다."),
             ("간호사 보조 / 케어 코디네이터", "대인 지원과 안정적인 케어에 유리합니다.")),
    "INFJ": (("임상심리사 / 상담사", "타인의 내면을 이해하고 돕는 일에 소명감이 있습니다."),
             ("컨텐츠 크리에이터(심층 주제)", "통찰을 글이나 영상으로 풀어내는 데 재능이 있습니다.")),
    "INTJ": (("연구원 / 데이터 사이언티스트", "전략적 사고로 복잡한 문제 구조화에 강합니다."),
             ("전략기획 / R&D 리더", "장기 비전과 시스템 설계에 적합합니다.")),
    "ISTP": (("기계 정비 / 현장 기술자", "실무적 문제 해결과 도구 활용에 능합니다."),
             ("응급 구조원(현장대응)", "빠른 판단과 손기술을 요하는 역할에 어울립니다.")),
    "ISFP": (("그래픽 디자이너 / 아티스트", "감각적 표현과 세부 미감을 살릴 수 있습니다."),
             ("동물관리사 / 자연보호 활동가", "조용하지만 헌신적인 현장 활동에 적합합니다.")),
    "INFP": (("문학·심리치료 관련 직군", "창의적 공감 능력으로 사람을 돕습니다."),
             ("NGO·사회적기업 기획자", "가치 중심의 프로젝트에 동기부여가 됩니다.")),
    "INTP": (("연구개발 엔지니어", "이론적 모델링과 논리적 분석을 즐깁니다."),
             ("소프트웨어 아키텍트 / 알고리즘 연구", "개념 설계와 문제 추상화에 강합니다.")),
    "ESTP": (("영업·현장 영업 전문가", "즉흥적 상황 대처와 사람 설득에 능합니다."),
             ("이벤트 운영 / 프로젝트 매니저(현장 중심)", "빠른 실행과 조정 능력이 장점입니다.")),
    "ESFP": (("퍼포먼스 아티스트 / 호스피탈리티 스태프", "사람과의 상호작용에서 에너지를 얻습니다."),
             ("브랜드·마케팅 실행가", "현장감 있는 캠페인 실행에 특화됩니다.")),
    "ENFP": (("창업·콘텐츠 기획자", "새로운 아이디어 발굴과 사람 연결을 즐깁니다."),
             ("커뮤니티 매니저 / PR", "사교성으로 네트워크를 만드는 데 강합니다.")),
    "ENTP": (("제품 매니저 / 스타트업 창업자", "아이디어 발굴과 빠른 실험을 즐깁니다."),
             ("전략 컨설턴트", "문제 재정의와 창의적 솔루션 제시에 능합니다.")),
    "ESTJ": (("운영 관리자 / 공장장", "체계적인 관리와 규칙 집행에 강합니다."),
             ("프로젝트 매니저(실행 중점)", "프로세스 관리와 리더십을 발휘합니다.")),
    "ESFJ": (("인사·교육 담당자", "사람 돌봄과 조율에 탁월합니다."),
             ("병원 행정 / 고객 서비스 매니저", "대인 서비스 관리에 적합합니다.")),
    "ENFJ": (("교육자 / 조직 개발 전문가", "사람의 잠재력을 끌어내는 데 재능이 있습니다."),
             ("HR 리더 / 커뮤니케이션 디렉터", "비전 전달과 팀 결속을 이끌어냅니다.")),
    "ENTJ": (("경영자 / 전략 컨설턴트", "결단력과 전략적 추진에 강합니다."),
             ("사업개발 리더 / CTO(기술 리더)", "비전 설정과 조직 운영을 이끌어갑니다."))
}

# 사용자 입력
mbti_choice = st.selectbox("MBTI 유형을 선택하세요:", mbti_list, index=0)
if st.button("추천 받기"):
    # 과학자 비서 톤
    st.markdown("### 🔬 분석 시작 — 보고서")
    st.write(f"연구원님, 선택된 MBTI: **{mbti_choice}** 입니다. 짧고 명료하게 진로 2가지를 제안드립니다.")
    career1, career2 = career_map[mbti_choice]
    st.markdown("**추천 1.** " + career1[0])
    st.caption(career1[1])
    st.markdown("**추천 2.** " + career2[0])
    st.caption(career2[1])

    # 간단한 행동 제안
    st.write("---")
    st.markdown("#### 작은 실험 제안")
    st.write("- 각 직무의 실제 채용 공고 3개를 찾아 핵심 요구 사항을 비교해보세요.")
    st.write("- 관심이 간다면 관련 단기 강의나 현장 인터뷰를 한 번 시도해 보는 것을 권장합니다.")
    st.write("")
    st.info("참고: 이 추천은 성향 기반의 가이드라인입니다 — 실무 경험과 가치관을 최종 판단 기준으로 삼으세요.")

    # 리포트 다운로드 (텍스트)
    report_text = (
        f"MBTI 리포트\n"
        f"선택: {mbti_choice}\n\n"
        f"추천1: {career1[0]} - {career1[1]}\n"
        f"추천2: {career2[0]} - {career2[1]}\n\n"
        "메타: 자동 생성\n"
    )
    st.download_button("리포트 다운로드 (.txt)", report_text, file_name=f"mbti_report_{mbti_choice}.txt")

# 약간의 웃음과 마무리 톤
st.write("")
st.write("_메모: '실험은 반복이 답' — 여러 직업을 시도해 보는 것이 가장 확실한 방법입니다._")
